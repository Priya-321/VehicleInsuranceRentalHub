<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head><title>Customer Vehicles</title></head>
<body>
    <h2>Insured Customer Vehicles</h2>

    <a href="/customer-vehicle/form">Add New Vehicle</a>

    <form method="get" th:action="@{/customer-vehicle/list}">
        Filter by Customer:
        <select name="customerId">
            <option value="">-- All --</option>
            <option th:each="c : ${customers}" 
                    th:value="${c.id}" 
                    th:text="${c.name}" 
                    th:selected="${c.id == selectedCustomerId}">
            </option>
        </select>
        <button type="submit">Filter</button>
    </form>

    <br/>

    <table border="1">
        <tr><th>ID</th><th>Registration No</th><th>Model</th><th>Type</th><th>Owner</th><th>Action</th></tr>
        <tr th:each="v : ${vehicles}">
            <td th:text="${v.id}"></td>
            <td th:text="${v.registrationNumber}"></td>
            <td th:text="${v.model}"></td>
            <td th:text="${v.type}"></td>
            <td th:text="${v.customer.name}"></td>
            <td><a th:href="@{/customer-vehicle/delete/{id}(id=${v.id})}">Delete</a></td>
        </tr>
    </table>
</body>
</html>
