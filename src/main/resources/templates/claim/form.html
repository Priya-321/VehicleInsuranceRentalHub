<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head><title>File a Claim</title></head>
<body>
    <h2>File Insurance Claim</h2>

    <!-- Customer Search Form -->
    <form th:action="@{/claim/form}" method="get">
        Search Customer: <input type="text" name="customerName" th:value="${customerName}" />
        <button type="submit">Search</button>
    </form>

    <!-- Error Message -->
    <div th:if="${errorMessage}" style="color: red; font-weight: bold;">
        <p th:text="${errorMessage}"></p>
    </div>

    <!-- Claim Form -->
    <form th:action="@{/claim/save}" th:object="${claim}" method="post">
        Date: <input type="date" th:field="*{claimDate}" /><br/>
        Description: <textarea th:field="*{description}"></textarea><br/>
        Status:
        <select th:field="*{status}">
            <option value="Pending">Pending</option>
            <option value="Approved">Approved</option>
            <option value="Rejected">Rejected</option>
        </select><br/>

        <!-- Vehicle Dropdown from Policy List -->
        <label>Policy (by Vehicle):</label>
        <select name="policy" required>
            <option value="">-- Select Vehicle --</option>
            <option th:each="p : ${policies}"
                    th:value="${p.id}"
                    th:text="${p.vehicle.registrationNumber + ' (Policy #' + p.id + ')'}">
            </option>
        </select><br/>

        <button type="submit">Submit</button>
    </form>
</body>
</html>
